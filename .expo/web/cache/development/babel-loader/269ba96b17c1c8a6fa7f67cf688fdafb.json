{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/nicolaseuliarte/Documents/Projects/imprv/components/main/CourseDetail.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as firebase from \"firebase\";\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { Button, Switch } from \"react-native-paper\";\nimport { connect } from \"react-redux\";\n\nfunction CourseDetail(props) {\n  var _this = this;\n\n  var _props$route$params$i = props.route.params.item,\n      id = _props$route$params$i.id,\n      name = _props$route$params$i.name,\n      Description = _props$route$params$i.Description,\n      Lessons = _props$route$params$i.Lessons,\n      live = _props$route$params$i.live,\n      userprogress = _props$route$params$i.userprogress;\n\n  var _useState = useState(props.route.params.enrolled ? props.route.params.enrolled : false),\n      _useState2 = _slicedToArray(_useState, 2),\n      Enrolled = _useState2[0],\n      setEnrolled = _useState2[1];\n\n  var _useState3 = useState(live),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isEnabled = _useState4[0],\n      setIsEnabled = _useState4[1];\n\n  var toggleSwitch = function toggleSwitch() {\n    firebase.firestore().collection(\"Courses\").doc(id).update({\n      live: !isEnabled\n    });\n    setIsEnabled(function (previousState) {\n      return !previousState;\n    });\n  };\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      Lesson = _useState6[0],\n      setLesson = _useState6[1];\n\n  var getlesson = function getlesson(item) {\n    var docRef = firebase.firestore().collection(\"lessons\").doc(item);\n    docRef.get().then(function (doc) {\n      if (doc.exists) {\n        console.log(\"Document data:\", doc.data());\n        setLesson(function (oldarr) {\n          return [].concat(_toConsumableArray(oldarr), [_objectSpread({\n            id: item\n          }, doc.data())]);\n        });\n      } else {\n        console.log(\"No such document!\");\n      }\n    });\n  };\n\n  var getenrolled = function getenrolled() {\n    firebase.firestore().collection(\"users\").doc(firebase.auth().currentUser.uid).update({\n      Courses: firebase.firestore.FieldValue.arrayUnion({\n        id: id\n      })\n    });\n    setEnrolled(true);\n    props.navigation.navigate(\"portal\");\n  };\n\n  useEffect(function () {\n    if (Lessons && Array.isArray(Lessons)) {\n      Lessons.map(function (item) {\n        getlesson(item);\n      });\n    }\n\n    console.log([] == Array);\n  }, []);\n\n  var Item = function Item(_ref) {\n    var item = _ref.item,\n        onPress = _ref.onPress,\n        style = _ref.style,\n        marks = _ref.marks;\n    return React.createElement(TouchableOpacity, {\n      onPress: onPress,\n      style: [styles.item, style],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, item.name), marks.length != 0 ? React.createElement(View, {\n      style: {\n        backgroundColor: \"green\",\n        width: 10,\n        height: 10,\n        borderRadius: 10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }) : null);\n  };\n\n  var renderItem = function renderItem(_ref2) {\n    var item = _ref2.item;\n    console.log(item);\n    console.log(userprogress);\n    var marks = \"\";\n\n    if (Array.isArray(userprogress)) {\n      var index = userprogress.findIndex(function (value) {\n        return value.id == item.id;\n      });\n      console.log(index);\n\n      if (index != -1) {\n        marks = userprogress[index].marks + \"%\";\n      }\n    }\n\n    console.log(marks);\n    return React.createElement(Item, {\n      item: item,\n      marks: marks,\n      onPress: function onPress() {\n        props.navigation.navigate(\"LessonDetail\", {\n          item: item,\n          Enrolled: Enrolled,\n          courseid: id,\n          marks: marks\n        });\n      },\n      style: {\n        backgroundColor: \"#dbd9d9\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    });\n  };\n\n  return React.createElement(View, {\n    style: {\n      padding: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, props.currentUser.t_s == \"Student\" ? null : React.createElement(View, {\n    style: {\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, React.createElement(Switch, {\n    trackColor: {\n      false: \"#767577\",\n      true: \"#81b0ff\"\n    },\n    thumbColor: isEnabled ? \"#f5dd4b\" : \"#f4f3f4\",\n    ios_backgroundColor: \"#3e3e3e\",\n    onValueChange: toggleSwitch,\n    value: isEnabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  })), React.createElement(Text, {\n    style: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, \"Course\"), React.createElement(Text, {\n    style: styles.Details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, name), React.createElement(Text, {\n    style: styles.heading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, \"Description\"), React.createElement(Text, {\n    style: styles.Details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, Description), React.createElement(View, {\n    style: styles.card,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, React.createElement(FlatList, {\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: renderItem,\n    data: Lesson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }), props.currentUser.t_s == \"Student\" ? null : React.createElement(Button, {\n    style: {\n      margin: 10\n    },\n    mode: \"contained\",\n    onPress: function onPress() {\n      props.navigation.navigate(\"createLesson\", {\n        id: id,\n        onback: function onback(props) {\n          getlesson(props);\n        }\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, \"Add lessons\")), props.currentUser.t_s == \"Student\" && Enrolled !== true ? React.createElement(Button, {\n    onPress: getenrolled,\n    mode: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"Get Enrolled\") : React.createElement(Button, {\n    disabled: true,\n    mode: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, \"Enrolled\"));\n}\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser\n  };\n};\n\nexport default connect(mapStateToProps)(CourseDetail);\nvar styles = StyleSheet.create({\n  Details: {\n    backgroundColor: \"#dbd9d9\",\n    borderRadius: 5,\n    padding: 15\n  },\n  heading: {\n    fontSize: 20\n  },\n  card: {\n    margin: 5,\n    padding: 5,\n    backgroundColor: \"white\",\n    elevation: 5\n  },\n  item: {\n    padding: 10,\n    marginVertical: 8,\n    marginHorizontal: 16,\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  title: {\n    flex: 1\n  }\n});","map":{"version":3,"sources":["/Users/nicolaseuliarte/Documents/Projects/imprv/components/main/CourseDetail.js"],"names":["firebase","React","useState","useEffect","Button","Switch","connect","CourseDetail","props","route","params","item","id","name","Description","Lessons","live","userprogress","enrolled","Enrolled","setEnrolled","isEnabled","setIsEnabled","toggleSwitch","firestore","collection","doc","update","previousState","Lesson","setLesson","getlesson","docRef","get","then","exists","console","log","data","oldarr","getenrolled","auth","currentUser","uid","Courses","FieldValue","arrayUnion","navigation","navigate","Array","isArray","map","Item","onPress","style","marks","styles","title","length","backgroundColor","width","height","borderRadius","renderItem","index","findIndex","value","courseid","padding","t_s","flexDirection","justifyContent","false","true","heading","Details","card","margin","onback","mapStateToProps","store","userState","StyleSheet","create","fontSize","elevation","marginVertical","marginHorizontal","alignItems","flex"],"mappings":"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","sourcesContent":["// Course Creation\r\nimport * as firebase from \"firebase\";\r\nimport React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useEffect } from \"react\";\r\nimport {\r\n  FlatList,\r\n  StyleSheet,\r\n  Text,\r\n  TouchableOpacity,\r\n  View,\r\n} from \"react-native\";\r\nimport { Button, Switch } from \"react-native-paper\";\r\nimport { connect } from \"react-redux\";\r\n\r\nfunction CourseDetail(props) {\r\n  const {\r\n    id,\r\n    name,\r\n    Description,\r\n    Lessons,\r\n    live,\r\n    userprogress,\r\n  } = props.route.params.item;\r\n  const [Enrolled, setEnrolled] = useState(\r\n    props.route.params.enrolled ? props.route.params.enrolled : false\r\n  );\r\n  const [isEnabled, setIsEnabled] = useState(live);\r\n  const toggleSwitch = () => {\r\n    firebase.firestore().collection(\"Courses\").doc(id).update({\r\n      live: !isEnabled,\r\n    });\r\n    setIsEnabled((previousState) => !previousState);\r\n  };\r\n  const [Lesson, setLesson] = useState([]);\r\n\r\n  const getlesson = (item) => {\r\n    var docRef = firebase.firestore().collection(\"lessons\").doc(item);\r\n\r\n    docRef.get().then((doc) => {\r\n      if (doc.exists) {\r\n        console.log(\"Document data:\", doc.data());\r\n\r\n        setLesson((oldarr) => [...oldarr, { id: item, ...doc.data() }]);\r\n      } else {\r\n        // doc.data() will be undefined in this case\r\n        console.log(\"No such document!\");\r\n      }\r\n    });\r\n  };\r\n  // updating user collection and adding course in user enrolled course array\r\n  const getenrolled = () => {\r\n    firebase\r\n      .firestore()\r\n      .collection(\"users\")\r\n      .doc(firebase.auth().currentUser.uid)\r\n      .update({\r\n        Courses: firebase.firestore.FieldValue.arrayUnion({ id }),\r\n      });\r\n    setEnrolled(true);\r\n    props.navigation.navigate(\"portal\");\r\n  };\r\n  useEffect(() => {\r\n    if (Lessons && Array.isArray(Lessons)) {\r\n      Lessons.map((item) => {\r\n        getlesson(item);\r\n      });\r\n    }\r\n\r\n    console.log([] == Array);\r\n  }, []);\r\n  const Item = ({ item, onPress, style, marks }) => (\r\n    <TouchableOpacity onPress={onPress} style={[styles.item, style]}>\r\n      <Text style={styles.title}>{item.name}</Text>\r\n      {marks.length != 0 ? (\r\n        <View\r\n          style={{\r\n            backgroundColor: \"green\",\r\n            width: 10,\r\n            height: 10,\r\n            borderRadius: 10,\r\n          }}\r\n        ></View>\r\n      ) : null}\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  const renderItem = ({ item }) => {\r\n    console.log(item);\r\n    console.log(userprogress);\r\n    let marks = \"\";\r\n    if (Array.isArray(userprogress)) {\r\n      let index = userprogress.findIndex((value) => {\r\n        return value.id == item.id;\r\n      });\r\n      console.log(index);\r\n      if (index != -1) {\r\n        marks = userprogress[index].marks + \"%\";\r\n      }\r\n    }\r\n    console.log(marks);\r\n    return (\r\n      <Item\r\n        item={item}\r\n        marks={marks}\r\n        onPress={() => {\r\n          props.navigation.navigate(\"LessonDetail\", {\r\n            item,\r\n            Enrolled,\r\n            courseid: id,\r\n            marks,\r\n          });\r\n        }}\r\n        style={{ backgroundColor: \"#dbd9d9\" }}\r\n      />\r\n    );\r\n  };\r\n  return (\r\n    <View style={{ padding: 10 }}>\r\n      {props.currentUser.t_s == \"Student\" ? null : (\r\n        <View style={{ flexDirection: \"row\", justifyContent: \"flex-end\" }}>\r\n          <Switch\r\n            trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\r\n            thumbColor={isEnabled ? \"#f5dd4b\" : \"#f4f3f4\"}\r\n            ios_backgroundColor=\"#3e3e3e\"\r\n            onValueChange={toggleSwitch}\r\n            value={isEnabled}\r\n          />\r\n        </View>\r\n      )}\r\n      <Text style={styles.heading}>Course</Text>\r\n      <Text style={styles.Details}>{name}</Text>\r\n      <Text style={styles.heading}>Description</Text>\r\n      <Text style={styles.Details}>{Description}</Text>\r\n      <View style={styles.card}>\r\n        <FlatList\r\n          keyExtractor={(item) => item.id}\r\n          renderItem={renderItem}\r\n          data={Lesson}\r\n        />\r\n        {props.currentUser.t_s == \"Student\" ? null : (\r\n          <Button\r\n            style={{ margin: 10 }}\r\n            mode={\"contained\"}\r\n            onPress={() => {\r\n              props.navigation.navigate(\"createLesson\", {\r\n                id,\r\n                onback: (props) => {\r\n                  getlesson(props);\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            Add lessons\r\n          </Button>\r\n        )}\r\n      </View>\r\n\r\n      {props.currentUser.t_s == \"Student\" && Enrolled !== true ? (\r\n        <Button onPress={getenrolled} mode={\"contained\"}>\r\n          Get Enrolled\r\n        </Button>\r\n      ) : (\r\n        <Button disabled={true} mode={\"contained\"}>\r\n          Enrolled\r\n        </Button>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (store) => ({\r\n  currentUser: store.userState.currentUser,\r\n});\r\nexport default connect(mapStateToProps)(CourseDetail);\r\nconst styles = StyleSheet.create({\r\n  Details: {\r\n    backgroundColor: \"#dbd9d9\",\r\n    borderRadius: 5,\r\n    padding: 15,\r\n  },\r\n  heading: {\r\n    fontSize: 20,\r\n  },\r\n  card: {\r\n    margin: 5,\r\n    padding: 5,\r\n    backgroundColor: \"white\",\r\n    elevation: 5,\r\n  },\r\n  item: {\r\n    padding: 10,\r\n    marginVertical: 8,\r\n    marginHorizontal: 16,\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  title: {\r\n    // fontSize: 32,\r\n    flex: 1,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}